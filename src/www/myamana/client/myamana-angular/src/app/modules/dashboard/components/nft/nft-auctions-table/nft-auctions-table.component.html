<div class="flex-col rounded-lg bg-background px-8 py-8 sm:flex-row">
  <div class="mb-4 flex items-center justify-between">
    <div class="flex-col items-center">
      <h3 class="text-md font-bold text-foreground">{{tableTitle}}
      </h3>
    </div>
    <!-- <button
      class="flex-none rounded-md bg-card px-4 py-2.5 text-xs font-semibold text-muted-foreground hover:bg-muted hover:text-foreground">
      History
    </button> -->
  </div>

  <div class="relative overflow-x-auto">
    <table class="w-full table-auto">
      <!--Table head-->
      <thead class="text-xs uppercase text-muted-foreground">
        <tr>
          <th class="py-3 text-left"></th> <!-- Colonne Association sans titre -->
          <th class="py-3 text-right"></th> <!-- Colonne Montant sans titre -->
          <th class="py-3 text-center" *ngIf="showPaymentColumn"></th> <!-- Colonne Paiement sans titre, conditionnelle -->
          <th class="py-3 text-right" *ngIf="showReceiptColumn">Recu</th>
          <!-- <th class="py-3 text-right">Recent Offer</th>
          <th class="py-3 text-right">Time Left</th>
          <th class="py-3 text-right">View</th> -->
        </tr>
      </thead>
      <!--end Table head-->
      <!--Table body-->
      <tbody>
        <tr *ngFor="let nft of nfts" class="border-b border-dashed border-border hover:bg-card">
          <td class="py-3 text-left">
            <div class="flex items-center">
              <img [src]="nft.image" (error)="handleImageError($event)" class="mr-2 h-10 w-10 flex-none rounded-sm" [alt]="nft.asso" />
              <span>{{nft.asso}}</span>
            </div>
          </td>
          <td class="py-3 text-right">
            <div class="flex flex-col items-end">
              <span class="text-sm font-semibold text-foreground">{{nft.montant}} €</span>
              <span class="text-xs font-semibold text-muted-foreground/50">{{nft.date}}</span>
            </div>
          </td>
          <td class="py-3 text-center" *ngIf="showPaymentColumn">
            <!-- Visa -->
            <fa-icon *ngIf="nft.moyen === 'CB' && nft.brand === 'visa'" 
                    [icon]="faVisa" 
                    class="text-[#1434CB] text-xl"
                    title="Visa">
            </fa-icon>

            <!-- Mastercard -->
            <svg *ngIf="nft.moyen === 'CB' && nft.brand === 'mastercard'" 
                class="h-5 inline-block" 
                viewBox="0 0 48 32" 
                fill="none" 
                xmlns="http://www.w3.org/2000/svg"
                title="Mastercard">
              <circle cx="16" cy="16" r="12" fill="#EB001B"/>
              <circle cx="32" cy="16" r="12" fill="#F79E1B" style="mix-blend-mode: multiply"/>
            </svg>

            <!-- American Express -->
            <fa-icon *ngIf="nft.moyen === 'CB' && nft.brand === 'american-express'" 
                    [icon]="faAmex" 
                    class="text-[#006FCF] text-xl"
                    title="American Express">
            </fa-icon>

            <!-- Carte Bancaire (CB) générique -->
            <fa-icon *ngIf="nft.moyen === 'CB' && (!nft.brand || nft.brand === 'carte-bancaire')" 
                    [icon]="faCard" 
                    class="text-indigo-600 text-xl"
                    title="Carte Bancaire">
            </fa-icon>
            
            <!-- IBAN -->
            <fa-icon *ngIf="nft.moyen === 'IBAN'" 
                    [icon]="faIban" 
                    class="text-blue-600 text-xl"
                    title="Prélèvement SEPA">
            </fa-icon>
            
            <!-- PayPal -->
            <fa-icon *ngIf="nft.moyen === 'paypal'" 
                    [icon]="faPaypal" 
                    class="text-[#003087] text-xl"
                    title="PayPal">
            </fa-icon>
            
            <!-- Virement -->
            <fa-icon *ngIf="nft.moyen === 'Virement'" 
                    [icon]="faTransfer" 
                    class="text-blue-600 text-xl"
                    title="Virement bancaire">
            </fa-icon>
            
            <!-- Chèque -->
            <fa-icon *ngIf="nft.moyen === 'Chèque'" 
                    [icon]="faCheck" 
                    class="text-amber-600 text-xl"
                    title="Chèque">
            </fa-icon>
            
            <!-- Espèces -->
            <fa-icon *ngIf="nft.moyen === 'Espèces'" 
                    [icon]="faCash" 
                    class="text-emerald-600 text-xl"
                    title="Espèces">
            </fa-icon>
            
            <!-- Fallback pour les autres moyens de paiement -->
            <span *ngIf="!['CB', 'IBAN', 'paypal', 'Virement', 'Chèque', 'Espèces'].includes(nft.moyen)" class="text-xs">{{nft.moyen || 'N/A'}}</span>
          </td>
          <td class="py-3 text-right" *ngIf="showReceiptColumn">
            <a [href]="nft.link" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary/80">
              <img src="assets/icons/heroicons/outline/recu.svg" alt="Icône Reçu" class="ml-auto h-4 w-4" />
            </a>
          </td>
        </tr>
      </tbody>
      <!--end::Table body-->
    </table>
  </div>
</div>
