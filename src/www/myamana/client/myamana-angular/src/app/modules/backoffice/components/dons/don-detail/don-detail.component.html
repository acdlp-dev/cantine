<div class="max-w-7xl mx-auto p-4 sm:p-6 bg-gray-50/50 min-h-screen animate__animated animate__fadeIn animate__faster mt-8">
    <!-- Header avec bouton de retour -->
    <!-- Header avec bouton de retour -->
    <div class="flex items-center mb-6">
        <button (click)="goBack()" class="mr-4 p-2 rounded-full hover:bg-gray-100 transition-colors">
            <!-- Vous pouvez garder l'icône SVG ou utiliser i-lucide si vous avez résolu le problème d'icônes -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="w-5 h-5 text-gray-600">
                <path d="m12 19-7-7 7-7"></path>
                <path d="M19 12H5"></path>
            </svg>
        </button>
        <h1 class="text-2xl font-bold text-gray-800">
            Détails du <span class="text-[#ff7443]">don</span>
        </h1>
    </div>

    <!-- Loader -->
    <div *ngIf="isLoading" class="py-12 flex justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-4 border-[#ff7443]/20 border-t-[#ff7443]"></div>
    </div>

    <!-- Message d'erreur -->
    <div *ngIf="error" class="bg-red-50 border border-red-200 text-red-700 p-4 rounded-md">
        <div class="flex">
            <i-lucide name="alert-circle" class="w-5 h-5 mr-3 text-red-500"></i-lucide>
            <span>{{ error }}</span>
        </div>
    </div>

    <!-- Contenu des détails -->
    <ng-container *ngIf="!isLoading && !error && donDetails">
        <!-- Bloc d'informations sur le don -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800">Information du don</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6">
                <!-- Date -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Date de paiement</h3>
                    <p class="text-base font-medium text-gray-900">{{ donDetails.datePaiement }}</p>
                </div>

                <!-- Montant -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Montant</h3>
                    <p class="text-lg font-semibold text-[#ff7443]">{{ donDetails.montant }} €</p>
                </div>

                <!-- Type -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Type</h3>
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium" [ngClass]="{
                  'bg-green-100 text-green-800': donDetails.type === 'mensuel',
                  'bg-blue-100 text-blue-800': donDetails.type === 'ponctuel',
                  'bg-amber-100 text-amber-800': donDetails.type === 'autre'
                }">
                        <span class="w-2 h-2 mr-1.5 rounded-full" [ngClass]="{
                    'bg-green-500': donDetails.type === 'mensuel',
                    'bg-blue-500': donDetails.type === 'ponctuel',
                    'bg-amber-500': donDetails.type === 'autre'
                  }"></span>
                        {{ donDetails.type }}
                    </span>
                </div>

                <!-- Moyen de paiement -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Moyen de paiement</h3>
                    <p class="text-base text-gray-900">{{ donDetails.moyen }}</p>
                </div>

                <!-- Référence -->
                <div *ngIf="donDetails.reference">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Référence</h3>
                    <p class="text-base text-gray-900">{{ donDetails.reference }}</p>
                </div>

                <!-- Campagne -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Campagne</h3>
                    <p class="text-base text-gray-600">{{ donDetails.amana }}</p>
                </div>
            </div>
        </div>

        <!-- Bloc d'informations sur le donateur -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800">Information du donateur</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
                <!-- Nom -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Nom</h3>
                    <p class="text-base font-medium text-gray-900">{{ donDetails.nom }}</p>
                </div>

                <!-- Prénom -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Prénom</h3>
                    <p class="text-base font-medium text-gray-900">{{ donDetails.prenom }}</p>
                </div>

                <!-- Email -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Email</h3>
                    <p class="text-base text-gray-600">{{ donDetails.email }}</p>
                </div>

                <!-- Adresse complète -->
                <div *ngIf="donDetails.adresse">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Adresse</h3>
                    <p class="text-base text-gray-600">
                        {{ donDetails.adresse }}<br>
                        {{ donDetails.code_postal }} {{ donDetails.ville }}<br>
                        {{ donDetails.pays }}
                    </p>
                </div>

                <!-- Téléphone (conditionnel si amana est "Plantez un arbre") -->
                <div *ngIf="donDetails.amana === 'Plantez un arbre' && donDetails.tel">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Téléphone</h3>
                    <p class="text-base text-gray-600">{{ donDetails.tel }}</p>
                </div>
            </div>
        </div>

        <!-- Bloc spécifique à "Plantez un arbre" -->
        <div *ngIf="donDetails.amana === 'Plantez un arbre' && donDetails.nomArbre"
            class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800">Informations sur l'arbre</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
                <!-- Nom de l'arbre -->
                <div>
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Nom de l'arbre</h3>
                    <p class="text-base font-medium text-gray-900">{{ donDetails.nomArbre }}</p>
                </div>
            </div>
        </div>

        <!-- Bloc de reçu fiscal -->
        <div *ngIf="donDetails.demande_recu !== undefined || donDetails.type === 'mensuel'"
            class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800">Reçu fiscal</h2>
            </div>

            <div class="p-6">
                <div class="flex items-center mb-4">
                    <!-- Message spécifique pour les dons mensuels -->
                    <span *ngIf="donDetails.type === 'mensuel'"
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                        <span class="w-2 h-2 mr-1.5 rounded-full bg-blue-500"></span>
                        Reçu à récupérer dans le tableau Mes Abonnements
                    </span>

                    <!-- Message standard pour les autres types de dons -->
                    <span *ngIf="donDetails.type !== 'mensuel'"
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium" [ngClass]="{
         'bg-green-100 text-green-800': donDetails.demande_recu,
         'bg-gray-100 text-gray-600': !donDetails.demande_recu
       }">
                        <i-lucide [name]="donDetails.demande_recu ? 'check' : 'x'" class="w-4 h-4 mr-1.5"></i-lucide>
                        {{ donDetails.demande_recu ? 'Reçu fiscal demandé' : 'Pas de demande de reçu fiscal' }}
                    </span>
                </div>

                <!-- Lien du reçu s'il existe (uniquement pour les dons non mensuels) -->
                <div *ngIf="donDetails.lien_recu && donDetails.type !== 'mensuel'" class="mt-4">
                    <a [href]="donDetails.lien_recu" target="_blank"
                        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#ff7443] hover:bg-[#ff6234] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ff7443]">
                        <i-lucide name="file-text" class="w-4 h-4 mr-2"></i-lucide>
                        Télécharger le reçu fiscal
                    </a>
                </div>
            </div>
        </div>

        <!-- Informations Stripe pour les administrateurs -->
        <div *ngIf="donDetails.stripe_ch_id || donDetails.stripe_cus_id || donDetails.stripe_sub_id"
            class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="p-6 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800">Informations techniques</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
                <!-- ID Client Stripe -->
                <div *ngIf="donDetails.stripe_cus_id">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">ID Client Stripe</h3>
                    <div class="flex items-center">
                        <code class="text-sm bg-gray-100 px-2 py-1 rounded">{{ donDetails.stripe_cus_id }}</code>
                        <button (click)="copyToClipboard(donDetails.stripe_cus_id || '')"
                            class="ml-2 p-1 text-gray-500 hover:text-gray-700">
                            <i-lucide name="copy" class="w-4 h-4"></i-lucide>
                        </button>
                    </div>
                </div>

                <!-- ID Paiement Stripe -->
                <div *ngIf="donDetails.stripe_ch_id">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">ID Paiement Stripe</h3>
                    <div class="flex items-center">
                        <code class="text-sm bg-gray-100 px-2 py-1 rounded">{{ donDetails.stripe_ch_id }}</code>
                        <button (click)="copyToClipboard(donDetails.stripe_ch_id || '')"
                            class="ml-2 p-1 text-gray-500 hover:text-gray-700">
                            <i-lucide name="copy" class="w-4 h-4"></i-lucide>
                        </button>
                    </div>
                </div>

                <!-- ID Abonnement Stripe (pour dons mensuels) -->
                <div *ngIf="donDetails.stripe_sub_id">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">ID Abonnement Stripe</h3>
                    <div class="flex items-center">
                        <code class="text-sm bg-gray-100 px-2 py-1 rounded">{{ donDetails.stripe_sub_id }}</code>
                        <button (click)="copyToClipboard(donDetails.stripe_sub_id || '')"
                            class="ml-2 p-1 text-gray-500 hover:text-gray-700">
                            <i-lucide name="copy" class="w-4 h-4"></i-lucide>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</div>