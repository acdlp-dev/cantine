<div class="max-w-4xl mx-auto p-4 sm:p-6 mt-8">
    <!-- En-tête -->
    <div class="mb-8">
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 tracking-tight flex flex-wrap items-baseline gap-2">
            Créer une <span class="text-[#ff7443]">action</span>
        </h1>
        <p class="mt-2 text-gray-600">Remplissez le formulaire ci-dessous pour créer une nouvelle action de bénévolat</p>
    </div>

    <!-- Messages de succès et d'erreur -->
    <div *ngIf="successMessage" class="mb-6 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-start">
        <i-lucide name="check-circle" class="w-5 h-5 mr-3 flex-shrink-0 mt-0.5"></i-lucide>
        <span>{{ successMessage }}</span>
    </div>

    <div *ngIf="errorMessage" class="mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg flex items-start">
        <i-lucide name="alert-circle" class="w-5 h-5 mr-3 flex-shrink-0 mt-0.5"></i-lucide>
        <span>{{ errorMessage }}</span>
    </div>

    <!-- Formulaire -->
    <form (ngSubmit)="onSubmit()" class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-6">

        <!-- Informations générales -->
        <div class="border-b border-gray-200 pb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Informations générales</h2>

            <div class="grid grid-cols-1 gap-6">
                <!-- Nom de l'action -->
                <div>
                    <label for="nom" class="block text-sm font-medium text-gray-700 mb-2">
            Nom de l'action <span class="text-red-500">*</span>
          </label>
                    <input type="text" id="nom" name="nom" [(ngModel)]="actionData.nom" required class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors" placeholder="Ex: Distribution alimentaire"
                    />
                </div>

                <!-- Description de l'action -->
                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
            Description
          </label>
                    <quill-editor [(ngModel)]="actionData.description" [modules]="quillModules" [styles]="{height: '200px'}" placeholder="Décrivez l'action en détail (objectifs, déroulement, matériel nécessaire, etc.)" class="bg-white">
                    </quill-editor>
                </div>

                <!-- Date et heures -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="date_action" class="block text-sm font-medium text-gray-700 mb-2">
              Date <span class="text-red-500">*</span>
            </label>
                        <input type="date" id="date_action" name="date_action" [(ngModel)]="actionData.date_action" required class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors"
                        />
                    </div>

                    <div>
                        <label for="heure_debut" class="block text-sm font-medium text-gray-700 mb-2">
              Heure début <span class="text-red-500">*</span>
            </label>
                        <input type="time" id="heure_debut" name="heure_debut" [(ngModel)]="actionData.heure_debut" required class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors"
                        />
                    </div>

                    <div>
                        <label for="heure_fin" class="block text-sm font-medium text-gray-700 mb-2">
              Heure fin <span class="text-red-500">*</span>
            </label>
                        <input type="time" id="heure_fin" name="heure_fin" [(ngModel)]="actionData.heure_fin" required class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors"
                        />
                    </div>
                </div>

                <!-- Récurrence -->
                <div>
                    <label for="recurrence" class="block text-sm font-medium text-gray-700 mb-2">
            Récurrence
          </label>
                    <select id="recurrence" name="recurrence" [(ngModel)]="actionData.recurrence" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors">
            <option value="Aucune">Aucune</option>
            <option value="Quotidienne">Quotidienne</option>
            <option value="Hebdomadaire">Hebdomadaire</option>
          </select>
                </div>
            </div>
        </div>

        <!-- Localisation -->
        <div class="border-b border-gray-200 pb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Localisation</h2>

            <div class="grid grid-cols-1 gap-6">
                <div>
                    <label for="rue" class="block text-sm font-medium text-gray-700 mb-2">
            Rue
          </label>
                    <input type="text" id="rue" name="rue" [(ngModel)]="actionData.rue" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors" placeholder="Adresse complète"
                    />
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="ville" class="block text-sm font-medium text-gray-700 mb-2">
              Ville
            </label>
                        <input type="text" id="ville" name="ville" [(ngModel)]="actionData.ville" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors" placeholder="Ville"
                        />
                    </div>

                    <div>
                        <label for="pays" class="block text-sm font-medium text-gray-700 mb-2">
              Pays
            </label>
                        <input type="text" id="pays" name="pays" [(ngModel)]="actionData.pays" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors" placeholder="Pays" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Responsable et participants -->
        <div class="border-b border-gray-200 pb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Responsable et participants</h2>

            <div class="grid grid-cols-1 gap-6">
                <div>
                    <label for="responsable_email" class="block text-sm font-medium text-gray-700 mb-2">
            Responsable <span class="text-red-500">*</span>
          </label>
                    <select id="responsable_email" name="responsable_email" [(ngModel)]="actionData.responsable_email" required class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors"
                        [disabled]="isLoadingResponsables">
            <option value="">-- Sélectionner un responsable --</option>
            <option *ngFor="let responsable of responsables" [value]="responsable.email">
              {{ responsable.nom }} {{ responsable.prenom }} ({{ responsable.email }})
            </option>
          </select>
                    <p *ngIf="isLoadingResponsables" class="mt-1 text-sm text-gray-500">
                        Chargement des responsables...
                    </p>
                    <p *ngIf="!isLoadingResponsables && responsables.length === 0" class="mt-1 text-sm text-orange-600">
                        Aucun responsable trouvé. Veuillez d'abord créer des responsables dans l'onglet Bénévoles.
                    </p>
                </div>

                <div>
                    <label for="nb_participants" class="block text-sm font-medium text-gray-700 mb-2">
            Nombre de participants maximum
          </label>
                    <input type="number" id="nb_participants" name="nb_participants" [(ngModel)]="actionData.nb_participants" min="1" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors"
                    />
                </div>
            </div>
        </div>

        <!-- Critères de participation -->
        <div class="pb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Critères de participation</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="genre" class="block text-sm font-medium text-gray-700 mb-2">
            Genre accepté
          </label>
                    <select id="genre" name="genre" [(ngModel)]="actionData.genre" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors">
            <option value="mixte">Mixte</option>
            <option value="homme">Homme</option>
            <option value="femme">Femme</option>
          </select>
                </div>

                <div>
                    <label for="age" class="block text-sm font-medium text-gray-700 mb-2">
            Âge requis
          </label>
                    <select id="age" name="age" [(ngModel)]="actionData.age" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff7443]/20 focus:border-[#ff7443] transition-colors">
            <option value="tous">Tous</option>
            <option value="majeure">Majeur (+18 ans)</option>
            <option value="mineur">Mineur (-18 ans)</option>
          </select>
                </div>
            </div>
        </div>

        <!-- Boutons -->
        <div class="flex flex-col sm:flex-row gap-4 pt-4">
            <button type="submit" [disabled]="isSubmitting" class="flex-1 sm:flex-initial bg-[#ff7443] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#ff6234] focus:outline-none focus:ring-2 focus:ring-[#ff7443] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
        <span *ngIf="!isSubmitting">Créer l'action</span>
        <span *ngIf="isSubmitting" class="flex items-center">
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Création en cours...
        </span>
      </button>

            <button type="button" (click)="resetForm()" [disabled]="isSubmitting" class="flex-1 sm:flex-initial bg-white text-gray-700 px-6 py-3 rounded-lg font-medium border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
        Réinitialiser
      </button>
        </div>
    </form>
</div>